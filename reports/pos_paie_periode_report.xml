<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <report
        id="report_pos_paie_periode"
        model="pos.paie.periode"
        string="Rapport Période de Paie"
        report_type="qweb-pdf"
        name="pos_paie.report_pos_paie_periode_template"
        file="pos_paie.report_pos_paie_periode_template"
        print_report_name="'Rapport_Paie_' + object.name"
    />
    <template id="report_pos_paie_periode_template" name="Rapport Période de Paie">
           <t t-call="web.html_container">
            <t t-foreach="docs" t-as="periode">
                <h2>Rapport de la periode de paie : <span t-esc="periode.name"/></h2>
                <h3>Statistiques Globales</h3>
                <table class="table table-bordered" style="width: 100%;">
                    <tr >
                        <td><strong>Date de debut :</strong></td>
                        <td><span t-esc="periode.date_debut"/></td>
                    </tr>
                    <tr>
                        <td><strong>Date de fin :</strong></td>
                        <td><span t-esc="periode.date_fin"/></td>
                    </tr>
                </table>
                <table class="table table-bordered" style="width: 100%;">
                    <tr>
                        <td><strong>Nombre de vendeurs :</strong></td>
                        <td><span t-esc="len(periode.ligne_ids)"/></td>
                        <td><strong>Total commandes :</strong></td>
                        <td><span t-esc="periode.total_commandes"/></td>
                    </tr>
                    <tr>
                        <td><strong>Total BP :</strong></td>
                        <td><span t-esc="periode.total_bp"/></td>
                        <td><strong>Total commissions :</strong></td>
                        <td><span t-esc="periode.commission_total"/></td>
                        
                    </tr>
                    <tr>
                        <td><strong>Cout total des cartes :</strong></td>
                        <td><span t-esc="periode.total_commandes - periode.commission_total"/></td>
                        <td><strong>Total a payer :</strong></td>
                        <td><span t-esc="periode.montant_net_total"/></td>
                    </tr>
                </table>
                <h3>Detail par Vendeur</h3>
                <table class="table table-condensed table-bordered" style="border: 1px solid #000; width: 100%;">
                    <thead style="background-color: #f0f0f0; font-weight: bold;">
                        <tr>
                            <th style="border: 1px solid #000;">Numero Carte</th>
                            <th style="border: 1px solid #000;">Vendeur</th>
                            <th style="border: 1px solid #000;">Nb Commandes</th>
                            <th style="border: 1px solid #000;">Total Commandes</th>
                            <th style="border: 1px solid #000;">Total BP</th>
                            <th style="border: 1px solid #000;">Commission</th>
                            <th style="border: 1px solid #000;">Cout Carte</th>
                            <th style="border: 1px solid #000;">Net a Payer</th>
                        </tr>
                    </thead>
                    <tbody>
<<<<<<< HEAD
                        <t t-foreach="sorted(periode.ligne_ids, key=lambda l: l.vendeur_name or '')" t-as="ligne">
=======
                    <!-- trie par vendeur_name -->
                        <t t-foreach="sorted(periode.ligne_ids, key=lambda l: l.vendeur_name)" t-as="ligne">
>>>>>>> cf8e185bd67739a518b2571fe0286d488bac70cb
                            <tr>
                                <td style="border: 1px solid #000;"><span t-esc="ligne.vendeur_card"/></td>
                                <td style="border: 1px solid #000;"><span t-esc="ligne.vendeur_name"/></td>
                                <td style="border: 1px solid #000;"><span t-esc="ligne.nb_commandes"/></td>
                                <td style="border: 1px solid #000;"><span t-esc="ligne.total_commandes"/></td>
                                <td style="border: 1px solid #000;"><span t-esc="ligne.total_bp"/></td>
                                <td style="border: 1px solid #000;"><span t-esc="ligne.commission"/></td>
                                <td style="border: 1px solid #000;"><span t-esc="500"/>Fc</td>
                                <td style="border: 1px solid #000;"><span t-esc="ligne.montant_net"/></td>
                            </tr>
                        </t>
                    </tbody>
                </table>
            </t>
        </t>
        </template>

        <!-- Action report PDF -->
   



</odoo>